<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
      <link rel="stylesheet" href="css/output.css">
      <title>Hymns Myanmar</title>
  </head>
  <body>
      <div class="mainContainer p-12">
        <ul class="hymns flex items-start justify-center gap-5 flex-col">
        </ul>
      </div>

      <script>
          let hymns;

          const fetchHymns = async (hymnId) => {
              try {
                  const response = await fetch(`http://hymnsmyanmar.000.pe/backend/api.php?id=${hymnId}`);
                  if (!response.ok) {
                      throw new Error("Network response was not ok");
                  }
                  hymns = await response.json();
                  console.log(hymns);
                  
                  const container = document.querySelector(".hymns");

                  // Determine the maximum length of verses and choruses
                  const maxLength = Math.max(hymns.verses.length, hymns.choruses.length);

                  for (let i = 0; i < maxLength; i++) {
                      if (i < hymns.verses.length) {
                          container.innerHTML += ` 
                              <li>
                                  ${hymns.verses[i].text}
                              </li>
                          `;
                      }
                      if (hymns.choruses != "N/A" && i < hymns.choruses.length) {
                          container.innerHTML += ` 
                              <li class="chorus">
                                  ${hymns.choruses[i].text}
                              </li>
                          `;
                      }
                  }

              } catch (error) {
                  console.error("Failed to fetch hymns:", error);
              }
          };

          fetchHymns(4);
      </script>
  </body>
</html>
